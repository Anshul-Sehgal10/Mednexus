(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[633],{2465:(e,s,t)=>{Promise.resolve().then(t.bind(t,3030))},3030:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var a=t(5155),r=t(2115),l=t(9326),i=t(5683),n=t(4333),o=t(9329),d=t(7711);t(8413);var c=t(2651);let h=(0,d.default)(()=>Promise.resolve().then(t.bind(t,9219)).then(e=>e.MapContainer),{loadableGenerated:{webpack:()=>[9219]},ssr:!1}),p=(0,d.default)(()=>Promise.resolve().then(t.bind(t,9219)).then(e=>e.TileLayer),{loadableGenerated:{webpack:()=>[9219]},ssr:!1}),b=(0,d.default)(()=>Promise.resolve().then(t.bind(t,9219)).then(e=>e.Marker),{loadableGenerated:{webpack:()=>[9219]},ssr:!1}),m=(0,d.default)(()=>Promise.resolve().then(t.bind(t,9219)).then(e=>e.Popup),{loadableGenerated:{webpack:()=>[9219]},ssr:!1});(0,d.default)(()=>Promise.resolve().then(t.bind(t,9219)).then(e=>e.useMap),{loadableGenerated:{webpack:()=>[9219]},ssr:!1});let u=(0,d.default)(()=>Promise.resolve(e=>{let{center:s}=e,{useMap:a}=t(9219),l=a();return(0,r.useEffect)(()=>{l.setView(s,13)},[s,l]),null}),{ssr:!1}),x=()=>{let[e,s]=(0,r.useState)([]),[d,x]=(0,r.useState)([0,0]),[v,f]=(0,r.useState)(!1),[g,y]=(0,r.useState)(null),[w,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{j(!0)},[]);let N=()=>new Promise((e,s)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(s=>{e({lat:s.coords.latitude,lon:s.coords.longitude})},e=>{s(e)}):s(Error("Geolocation is not supported by your browser"))}),k=async()=>{f(!0),y(null);try{let e=await N();x([e.lat,e.lon]);let t=await c.A.get("https://api.geoapify.com/v2/places?categories=healthcare.hospital&filter=circle:".concat(e.lon,",").concat(e.lat,",10000&apiKey=").concat("ca277f684e914ee8b72058fbc5134660"));if(!t.data.features)throw Error("No hospitals found in your area");let a=t.data.features.filter((e,s,t)=>s===t.findIndex(s=>s.properties.name===e.properties.name&&s.properties.address_line2===e.properties.address_line2)).map(s=>{let t=M(e.lat,e.lon,s.properties.lat,s.properties.lon);return{...s,distance:t}}).sort((e,s)=>e.distance-s.distance);s(a)}catch(e){y(e.message),console.error("Error fetching hospitals:",e)}finally{f(!1)}},M=(e,s,t,a)=>{let r=(t-e)*Math.PI/180,l=(a-s)*Math.PI/180,i=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e*Math.PI/180)*Math.cos(t*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371).toFixed(1)};return(0,r.useEffect)(()=>{w&&k()},[w]),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,a.jsx)("nav",{className:"fixed top-0 w-full bg-black/50 backdrop-blur-md border-b border-gray-800 z-50"}),(0,a.jsxs)("div",{className:"pt-16 flex h-screen",children:[(0,a.jsxs)("div",{className:"w-96 bg-black/30 backdrop-blur-md border-r border-gray-800 p-6 mt-1 overflow-y-auto",children:[(0,a.jsx)(l.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:k,disabled:v,className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-4 rounded-lg mb-6 font-semibold text-lg shadow-lg disabled:opacity-50",children:v?"Searching...":"Refresh Nearby Hospitals"}),g&&(0,a.jsx)("div",{className:"mb-4 p-4 bg-red-500/20 text-red-400 rounded-lg",children:g}),(0,a.jsx)(i.N,{children:e.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Nearby Hospitals"}),e.map((e,s)=>{var t;return(0,a.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.properties.name}),(0,a.jsxs)("span",{className:"text-sm text-blue-400",children:[e.distance,"km away"]})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-400 text-sm mb-2",children:[(0,a.jsx)(n.A,{className:"w-4 h-4 mr-1"}),e.properties.address_line2||e.properties.city]}),(0,a.jsxs)(l.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full mt-3 bg-blue-500/20 text-blue-400 py-2 rounded-lg flex items-center justify-center space-x-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:(null===(t=e.properties.contact)||void 0===t?void 0:t.phone)||"NA"})]})]},s)})]})})]}),(0,a.jsx)("div",{className:"flex-1 bg-gray-900 p-4",children:(0,a.jsxs)("div",{className:"bg-black/30 backdrop-blur-md border border-gray-800 rounded-lg h-full",children:[(0,a.jsx)("div",{className:"mb-4 p-4",children:(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Live Location Tracking"})}),(0,a.jsx)("div",{className:"h-[calc(100%-5rem)]",children:w&&0!==d[0]?(0,a.jsxs)(h,{center:d,zoom:13,style:{height:"100%",width:"100%"},className:"rounded-lg",children:[(0,a.jsx)(p,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,a.jsx)(b,{position:d,icon:t(8741).divIcon({className:"current-location-marker",html:'\n                        <div style="position: relative;">\n                          <div class="radar-wave"></div>\n                          <div class="w-4 h-4 bg-blue-500 rounded-full border-2 border-white relative z-10"></div>\n                        </div>\n                      '}),children:(0,a.jsx)(m,{children:"Your Location"})}),e.map((e,s)=>(0,a.jsx)(b,{position:[e.properties.lat,e.properties.lon],icon:t(8741).divIcon({className:"current-location-marker",html:'\n                          <div style="position: relative;">\n                            <div class="radar-wave2"></div>\n                            <div class="w-4 h-4 bg-red-500 rounded-full border-2 border-white relative z-10"></div>\n                          </div>\n                        '}),children:(0,a.jsx)(m,{children:(0,a.jsxs)("div",{className:"text-gray-900",children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.properties.name}),(0,a.jsx)("p",{className:"text-sm",children:e.properties.address_line2||e.properties.city}),(0,a.jsxs)("p",{className:"text-sm text-blue-600",children:[e.distance,"km away"]})]})})},s)),(0,a.jsx)(u,{center:d})]}):(0,a.jsx)("div",{className:"h-full flex items-center justify-center text-gray-400",children:w?"Getting your location...":"Loading map..."})})]})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[484,761,550,219,651,797,441,517,358],()=>s(2465)),_N_E=e.O()}]);